# **What2Eat – 정교한 맛집 평점 알고리즘**

## 1. 프로젝트 개요
- **프로젝트명**: [What2Eat](https://what2eat-chat.streamlit.app/)  
- **목표**: 단순 ‘평점 평균’이나 ‘리뷰 수’에 의존하지 않고, **리뷰어 특성**, **최신성**, **리뷰 신뢰도** 등 다양한 요인을 종합해 **더 정교하고 신뢰도 높은 맛집 점수**를 산출하는 시스템 구축  
- **핵심 아이디어**:  
  1. 개별 리뷰마다 **리뷰어의 평점 습관**, **작성 시점**, **리뷰어 레벨**을 고려한 **Combined Score** 생성  
  2. 음식점 단위 점수 산출 시에는 **베이지안 평균(Bayesian Average)** 등을 적용해 **리뷰 수에 따른 편차**(너무 적거나 지나치게 많은 경우)를 보정  


> 서비스 이용해보기 -> [오늘머먹?](https://what2eat-chat.streamlit.app/) 
---

## 2. 문제 인식과 배경

### 2.1 단순 평균의 한계
1. **리뷰어별 주관적 취향**  
   - 같은 4점 리뷰라도 **“평소 3점만 주는 깐깐한 리뷰어”** 가 준 4점과 **“항상 4점 이상 주는 관대한 리뷰어”** 의 4점은 **의미가 다름**.  
   - 단순 평균은 리뷰어 평점 습관을 반영하지 못해 왜곡 우려가 큼.
2. **리뷰 수에 따른 왜곡**  
   - 리뷰 개수가 많으면 **합계 기준**으로 상위에 오르기 쉽고,  
   - 리뷰 개수가 적어도 **1~2건의 만점**만으로 평균이 쉽게 치우치는 문제가 발생.
3. **맛집의 시간 변화**  
   - 셰프 교체, 인테리어 리뉴얼, 경영 이슈 등으로 **맛과 서비스가 달라질 수 있음**.  
   - 단순 평균은 2~3년 전 리뷰도 똑같이 반영해 **최신 트렌드 반영**이 어려움.
4. **리뷰어 신뢰도 미고려**  
   - **활동지수(리뷰 횟수, 사진·텍스트 분량 등)가 높은 리뷰어**와 **1회성 리뷰만 남긴 계정**을 동등하게 취급하면 **신뢰도**에서 문제가 생김.
5. **조작 평점 취약**  
   - 일부 업체가 **별점 테러**나 **가짜 계정** 등을 동원해 평점을 올리거나 낮추면, **단순 평균은 극단적 수치**에 쉽게 영향을 받음.

---

## 3. 핵심 알고리즘: 개별 리뷰 단위의 **Combined Score**

### 3.1 리뷰어의 평균 평점 대비 차이 (score_scaled)
- \(\text{score\_scaled} = (\text{리뷰어가 준 점수}) - (\text{리뷰어의 전체 평균 평점})\)  
  - 예: 평소 3.0점 정도만 주던 리뷰어가 어떤 식당에 5점을 줬다면, **상대적 만족도가 크다**고 판단.

### 3.2 리뷰 최신성 (date_scaled)
- 최신 리뷰(최근 3개월)를 **가중치 1**로, 오래될수록 가중치가 점진적으로 낮아짐(최대 2년까지 0.01까지 감소).  
- 예: 3개월 이내 리뷰 = 가중치 1, 6개월 지난 리뷰 = 가중치 0.7 …  
- **맛과 서비스가 시간 흐름에 따라 달라질** 수 있음을 반영.

### 3.3 리뷰어 레벨 (badge_scaled)
- 리뷰어 레벨(1~100)을 **min-max 정규화**하여 가중치를 부여.  
- **활동지수**(리뷰 수, 방문 다변성, 사진/텍스트 상세 정도)가 높을수록 **신뢰도가 높다**고 가정.

### 3.4 최종 Combined Score
![](https://velog.velcdn.com/images/sungrok7/post/b7079dee-3109-4065-b189-fc1167f27eeb/image.png)


- 점수 차이(Score)에 가중치 0.5,  
- 최신성(Date)에 0.2,  
- 리뷰어 레벨(Badge)에 0.3 배분.  
- 이를 통해 각 리뷰마다 **주관적 취향, 신뢰도, 최신성**이 반영된 **combined_score**가 생성됨.

---

## 4. 음식점 단위 점수: **베이지안 평균(Bayesian Average)**

### 4.1 단순 합계 vs. 단순 평균의 문제
- **단순 합계**: 리뷰가 많으면 점수가 지나치게 높아질 수 있음.  
- **단순 평균**: 리뷰가 극단적으로 적을 때, 단 1~2건 만점에 의해 평균이 급등하는 문제.

### 4.2 영화 평점 사례: IMDB Weighted Rating
- IMDB나 Rotten Tomatoes는 **베이지안 평균** 기법으로  
  - 전체 영화 평균(C)을 활용해, **리뷰(투표) 수가 적은 영화**라도 극단치에 치우치지 않도록 보정.
![](https://velog.velcdn.com/images/sungrok7/post/afa44dcf-2f88-4fea-b717-a12e57309173/image.png)

### 4.3 What2Eat 적용
- **결합 점수(Combined Score)** 평균을 음식점 고유의 \(x\)라 하고,  
- 리뷰 수(\(N\))가 적으면 사이트 전체 평균(u)에 어느 정도 수렴, 많아지면 음식점 고유 점수를 더욱 반영:
![](https://velog.velcdn.com/images/sungrok7/post/145d6b11-6634-4dc3-8b84-41b5feaf44b1/image.png)

- \(k\) = 최소 보장 리뷰 수, \(u\) = 전체 리뷰의 평균 Combined Score.  
- 이렇게 하면 **소수 리뷰**에 의한 극단적 고평가/저평가를 방지하면서, **리뷰가 충분히 쌓이면** 해당 음식점의 고유 평가를 더 반영 가능.

---

## 5. 구현/분석 흐름 예시

1) **개별 리뷰 계산**  
   - `score_scaled`, `date_scaled`, `badge_scaled` 산출 → **Combined Score** 생성  
2) **음식점 단위 집계**  
   - 리뷰 수(\(N\))와 Combined Score 평균(\(\bar{x}\)) 계산  
   - 전체 평균(\(\mu\)), 가중치(k)로 **베이지안 보정** 후 최종 점수 산출  
3) **랭킹 & 검증**  
   - 최종적으로 **“베이지안 보정된 맛집 점수”**를 기준으로 랭킹 생성  
   - 대표적인 맛집과 비교·사용자 설문으로 알고리즘 튜닝 반복

---

## 6. 주요 성과 및 기대 효과

1. **정교한 맛집 랭킹**  
   - 단순 평균 대비, **리뷰어 신뢰도**와 **시간적 변화**를 반영해 **‘진짜 맛집’을 거르는 정확도** 향상  
2. **조작 리뷰(별점 테러, 가짜 계정)에 대한 내성**  
   - 리뷰어 레벨·활동지수, 베이지안 평균 등을 통해 극단치가 **전체 평점을 왜곡**하기 어려움  
3. **사용자 만족도 증대**  
   - 노출되는 맛집 리스트의 **신뢰도**가 올라가, **사용자 리뷰** 및 방문 전환률 상승 기대  
4. **확장성**  
   - 동일 구조를 **영화 평점, 상품 리뷰, 여행지 평가** 등 다양한 분야로 확장 가능  
   - 사용자·리뷰어 간 **그래프 분석**(협업 필터링, link prediction)과 결합 시 **추천 시스템**으로도 발전 가능

---

## 7. 기술 스택

- **프로그래밍 언어**: Python  
- **데이터 처리/배포**: streamlit  
- **프레임워크/라이브러리**:  
  - 머신러닝/데이터 분석: scikit-learn, pandas, NumPy  
  - 웹 서버: FastAPI
---

## 8. 프로젝트 의의와 향후 계획

1. **객관성과 최신성을 겸비한 평점 시스템**  
   - 단순 평균 대신, 리뷰어 수준/활동성/최신성을 **가중치**로 반영하여 **신뢰도** 높은 결과 도출.  
2. **베이지안 방식 도입으로 극단치 방어**  
   - 리뷰 수가 적은 음식점이라도 **‘전체 평균’** 기준으로 보정되며,  
   - 충분히 많은 리뷰가 쌓일수록 해당 식당만의 고유 특성을 반영.  
3. **지속적 파라미터 튜닝 필요**  
   - Combined Score에 부여하는 가중치(0.5:0.2:0.3)나, 베이지안 보정에서의 \(k\)값 등은 **반복 실험**과 **현장 검증**을 통해 세부 조정.  
4. **장기적 확장**  
   - 개인화 맛집 추천시스템에 활용(쩝쩝LAB)
---

### 결론
**What2Eat** 프로젝트는  
1) 각 리뷰마다 **주관적 취향과 최신성, 리뷰어 신뢰도**를 종합한 **Combined Score**를 산출하고,  
2) 음식점 별로 리뷰 수를 고려한 **베이지안 평균**을 적용해 최종 점수를 보정함으로써,  
단순한 별점 평균의 함정을 피하고 **실제 이용자들이 신뢰할 수 있는 맛집 점수**를 제공한다는 데 의의가 있습니다.  

앞으로도 **사용자 피드백**과 **실제 미식 검증**을 반복해 파라미터를 개선해 나가며, 다양한 **리뷰 분석 기법**을 도입해 **한층 정교하고 공정한 맛집 랭킹**을 제시할 계획입니다.