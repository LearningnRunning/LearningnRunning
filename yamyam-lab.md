## 쩝쩝LAB – 개인화 맛집 추천시스템

## 1. 프로젝트 개요

- **프로젝트명**: 쩝쩝랩 개인화 맛집 추천시스템  
- **목표**: 사용자가 처한 **상황**과 **취향**을 세밀하게 반영해, 보다 **정교하고 만족도 높은 맛집**을 추천하는 개인화 추천 엔진 개발  
- **차별화 포인트**:  
  1) **GNN(Graph Neural Network)** 기반 추천 모델로, 유저–음식점 간 상호작용(평점·리뷰·즐겨찾기 등)을 그래프 형태로 학습  
  2) 최종 **맛집 랭킹화**는 What2Eat에서 연구한 **베이지안 평균 + 신뢰도 보정** 로직을 **LightGBM**과 결합하여 고도화 예정  

---

## 2. 문제 인식과 배경

### 2.1 기존 맛집 추천 서비스의 한계
- 대부분 **“평균 평점 상위”** 나 **“리뷰 수 많은”** 순으로 인기 리스트만 노출  
- **개인의 취향**(예: 시끄러운 분위기 선호 vs. 조용한 곳 선호)이나 **상황적 맥락**(데이트, 회식, 아이 동반 등)을 반영하기 어려움  
- 결과적으로 동일한 “유명 맛집 리스트”만 반복되는 현상

### 2.2 쩝쩝랩의 목표
- **특정 다수**(유사 취향·상황을 가진 사용자 그룹)가 만족할 만한 맞춤형 맛집 추천  
- **맞춤형**: 사용자 과거 리뷰 성향(메뉴, 분위기, 아이 동반 여부 등), 텍스트 키워드, 평점 부여 패턴 등을 세밀하게 반영  
- **선별된 맛집**: 추천의 대상 역시 일정 수준 이상의 **맛, 서비스, 분위기**를 갖춘 검증된 업체들이어야 함  
  - 이 때 **What2Eat**에서 연구한 **리뷰 보정(Combined Score), 베이지안 평균** 등을 활용해 **맛집 자체의 신뢰도**도 고려

---

## 3. 핵심 접근: GNN 기반 개인화 + What2Eat식 랭킹 결합

### 3.1 GNN 기반 개인화 추천

1) **유저–음식점 그래프(노드/엣지) 구성**  
   - **유저 노드 특성**:  
     - 선호 음식 카테고리(한식, 일식, 양식 등)  
     - 분위기(시끌벅적/조용, 가족단위/데이트 등)  
     - 과거 방문 기록 및 평점 패턴(늘 짠 맛에 높은 점수 등)  
   - **음식점 노드 특성**:  
     - 메뉴(삼겹살, 회, 감자탕 등), 분위기(노포, 트렌디, 단체석 가능 여부)  
     - 서비스(아이 놀이방, 룸/단독 공간 등), 가격대, 위치 등  
   - **엣지**: 유저가 음식점에 남긴 평점(positive/negative link), 리뷰(텍스트 분석 후 감성 점수), 즐겨찾기(자주 방문?), 예약 이력 등, 단 현재는 평점과 리뷰 데이터만 활용 가능
   

2) **GNN 학습 및 임베딩 생성**  
   - **GraphSAGE** 혹은 **GAT**(Graph Attention Network) 같은 모델로 **유저 임베딩**과 **음식점 임베딩**을 업데이트  
   - 사용자 행동이 새로 들어오면 **그래프를 동적으로 갱신**하여 **실시간 개인화** 강화

3) **개인화 추천 결과**  
   - A/B/C 사용자 각각의 **과거 리뷰/평점/선호도**를 GNN 모델이 학습 → **유사도 높은 음식점 노드**를 찾음  
   - 예) A는 시끌벅적한 삼겹살집 + 전통주 좋아함 → 시끌벅적한 분위기, 삼겹살 메뉴 선호도 높음, 전통주 많음 특성이 높은 음식점 순위 상위로 노출  
   - 예) B는 “조용한 회식 장소” 선호 → 룸이 있고 소음이 적은 횟집/일식집 우선 추천  
   - 예) C는 아이 동반 + 놀이방이 필수 → 감자탕/찌개류 + 놀이방  음식점 추천

---

### 3.2 What2Eat식 맛집 랭킹 접목 (LightGBM 활용)

1) **리뷰 보정(Combined Score) 적용**  
   - 단순 평균이 아닌,  
     - 리뷰어의 **평점 습관 대비 점수 차이**,  
     - 리뷰 작성 **최신성**,  
     - 리뷰어 활동 레벨(클릭, 저장, 공유 등 활동 지수 기반의 신뢰도)  
   - → 이 세 항목을 합산한 “Combined Score” 산출

2) **베이지안 평균(Bayesian Average)**  
   - 맛집 단위로 리뷰 수가 적으면 사이트 전체 평균에 어느 정도 끌어당겨 왜곡 방지,  
   - 리뷰가 충분히 쌓이면 해당 음식점 고유 점수를 더 반영  
   - **이러한 베이지안 보정**으로, 극단적·조작된 리뷰에 대한 내성 강화

3) **LightGBM 모델로 추가 피처 결합**  
   - “GNN에서 나온 음식점 추천 점수” + “Combined Score” + “베이지안 평균 보정 결과” + “추가 메타 정보(사진수, 방문 수도, 키워드 점수 등)”  
   - → LightGBM(혹은 XGBoost 등)으로 종합 점수를 예측  
   - 최종 랭킹 산출 시, 단순 통계(베이지안) + 머신러닝(트리모델) + GNN 추천 점수 **혼합**으로 **정교한 맛집 순위** 결정

---

## 4. 데이터 수집과 활용

### 4.1 사용자 행동 데이터
- **평점**: 유저가 매긴 점수(5점 만점 등)  
- **리뷰 텍스트**: (LLM(Qwen 2.5) 이용) 감성·키워드 추출  
- **즐겨찾기/방문 횟수**: 이용 빈도 파악  
- **과거 예약 이력**: 날짜/시간대, 음식점 유형

### 4.2 LLM(Qwen 2.5) 기반 텍스트 분석
- 형태소 분석, 토픽 모델링, 감성 분석  
- **화장실 청결**, **전통주 종류**, **아이 동반 편의** 등 세부적 키워드를 자동 추출해 **음식점 노드**에 임베딩
- “화장실이 불편하다” 같은 부정적 감성 → 그래프 엣지에서 negative link로 반영

---

## 5. 예시 시나리오

1) **A 유저**: 과거 리뷰에서 “시끌벅적 + 삼겹살 + 전통주” 선호  
   - GNN 임베딩 결과: “B 음식점”이 유력 후보 (노포 스타일+전통주 구비).  
   - 리뷰 보정 점수(Combined Score)도 높게 유지됨 → 베이지안 보정 후에도 상위권 유지  
   - LightGBM 최종 점수 산출 → B 음식점이 A 유저에게 상위 추천

2) **B 유저**: 평소 “조용한 회식, 룸 있는 횟집”을 좋아함  
   - GNN에서 “D 음식점(개별룸, 회 메뉴)” 매칭  
   - D 음식점의 Combined Score와 리뷰 수가 적당히 많아 베이지안 보정 시에도 높은 점수  
   - 최종적으로 B에게 “D 음식점” 랭킹 상위

3) **C 유저**: 아이 동반, 찌개·탕류 + 놀이방 필수  
   - GNN에서 “E 음식점(감자탕 + 놀이방)”이 match  
   - 텍스트 분석(리뷰)에서 “아이와 함께 갈 만하다” 키워드가 다수 발견 → positive link  
   - 베이지안 점수 또한 평균 이상 → C에게 상위 추천

---

## 6. 구현 및 기술 스택

1) **그래프 모델**  
   - **Framework**: PyTorch Geometric
   - **모델**: Node2Vec, GAT, GCN 등(노드 임베딩, link prediction)

2) **ML & Ranking**  
   - **LightGBM/XGBoost**: 통합 점수 예측 및 최종 랭킹 산출  
   - **Bayesian Average**: 맛집별 리뷰 수 보정(What2Eat 방식)

3) **텍스트 분석**  
   - **LLM(Qwen 2.5)**: 감성 분석, 키워드 추출, 리뷰 요약  
   - 추가적으로 **토큰화·형태소 분석(KoNLPy 등)** 활용
4) **평가**  
   - 개인화 추천 모델 성능지표(mAP, nDCG 등 활용)
---

## 7. 기대 효과 및 향후 계획

1) **더 높은 ‘맞춤 만족도’**  
   - 상황별(데이트 vs. 회식 vs. 가족 외식)·취향별(시끌벅적/조용, 메뉴 카테고리 등)로 세분화된 추천을 제공  
2) **사용자 피드백 & 실험**  
   - 베타 테스터 대상: “실제 맛집 추천 정확도” 설문  
   - A/B 테스트: “GNN만 vs. GNN+LightGBM” 방식 비교, **실제 방문 전환율** 차이 측정
3) **LLM 기반 텍스트 분석 고도화**  
   - 실제 리뷰에서 **세밀한 요소**(화장실, 주차, 전통주 등)를 추출해, 추천 이유를 **설명 가능**하게 만듦  

---

## 8. 결론

쩝쩝랩의 개인화 맛집 추천시스템은 **“사용자의 취향과 상황에 최적화된 맛집”**을 찾기 위해, 
1) **GNN 모델**을 활용해 유저–음식점 간 그래프 임베딩을 학습하고,  
2) **What2Eat**에서 연구한 **베이지안 평균 기반 랭킹** 로직을 **LightGBM**으로 결합하여 “정확도 + 왜곡 방지 + 해석 가능성”을 동시에 추구한다는 데 의의가 있습니다.

결국, **기계학습과 텍스트 분석**을 적극적으로 도입해 사용자 취향 적중 측면에서 만족도를 높이는 것은 물론, 리뷰 편향과 조작 문제를 최소화함으로써 **‘진짜 맛집’을 발굴**하고, 서로 다른 **개인·상황**에 최적화된 선택지를 제공하고자 합니다.  
향후 꾸준한 데이터·알고리즘 고도화와 사용자 피드백 반영을 통해, **가장 만족스러운 식사 경험**을 선사하는 추천시스템으로 발전해 나갈 계획입니다.

---